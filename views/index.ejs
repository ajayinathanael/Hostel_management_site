<%- include('partials/header') %>
 
<!-- navbar --> 
<nav class="navbar navbar-expand-lg bg-light text-dark  py-3 fixed-top"> 
    <div class="container">
        <a href="#" class="navbar-brand">Hostel Management System</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#ran">
          <span class="navbar-toggler-icon"></span>
        </button> 

        <div class="collapse navbar-collapse" id="ran">
          <ul class="navbar-nav ms-auto"> 

            <% if(user){ %>
            <li class="navbar-item">
                    <a href="/dashboard" class="nav-link"><%= user.firstname %> <%= user.lastname %> </a>
            </li>
            <li class="navbar-item">
                <a href="/dashboard" class="nav-link">Dashboard </a>
            </li>
            <li class="navbar-item">
                <a href="/Mybookings" class="nav-link">My bookings </a>
            </li>
           
            <%}else{ %>
                <li class="navbar-item">
                  <a href="/signup" class="nav-link">Signup</a>
                </li>
                <li class="navbar-item">
                  <a href="/login" class="nav-link">Login</a>
                </li>
            <%} %>
          </ul>
        </div>
    </div>
</nav>
            

<!-- Header -->
<header class="bg-dark text-center py-5 my-5">
    <div class="container py-5 text-light">
        <h1 class="display-4 fw-bold my-4">Hostel Management System</h1>
        <p class="lead fw-normal">Book your Hostel with us</p>
    </div>
</header>


<!-- Available Rooms + description -->
<section>
    <div class="container my-5 text-dark">

        <% if(room.length<1){ %>
        <div class="mb-2">
            <p class="shadow d-inline-block text-dark">No Rooms Available</p> <br>
            <button class="btn btn-primary"> <a href="/newRoom" style="text-decoration: none; color: white;">Add New Room</a></button>
        </div>
       <% } %>
  
        <div class="row g-5">
            <% room.forEach((rooms)=>{ %>
            <div class="col col-12 col-lg-4 col-md-12 col-sm-12">
                <div class="card card-light">
                    <span class="badge rounded-pill badge-notification bg-danger" style="position: absolute;"><%= rooms.available %></span>    
                    <img class="card-img-top" src="../uploads/<%= rooms.roomImage %>" alt=""> 
                    <div class="card-body">
                        <h2 class="card-title"><%= rooms.title %></h2>
                        <p class="card-subtitle text-muted mb-3"><%= rooms.description %></p>
        
                        <div class="row">
                            <div class="col col-md-6">
                                <p><i class="fa fa-map-marker" aria-hidden="true"></i> <%= rooms.location %></p>
                            </div>
                            <div class="col col-md-6">
                                <p><i class="fa fa-credit-card" aria-hidden="true"></i> <%= rooms.price %></p>
                            </div>
                            <div class="col col-md-6">
                                <p><i class="fa fa-flag" aria-hidden="true"></i> <%= rooms.nearby %></p>
                            </div>
                            <div class="col col-md-6">
                                <p><i class="fa fa-users" aria-hidden="true"></i> <%= rooms.occupant %></p>
                            </div>
                        </div>
                    </div>
                    <!-- <hr> -->
                    <div class="d-flex justify-content-end">
                       <% if(rooms.available === 'Available'){ %>
                        <button class="btn btn-success rounded-pill p-3 mb-2 mx-3">
                            <a href="/roomDetail/<%= rooms._id %>" style="text-decoration: none; color: white;">See Details</a>
                            </button>
                        <%   }else{ %>
                                <button class="btn btn-success rounded-pill p-3 mb-2 mx-3" id="disableBtn">
                                    <a href="/roomDetail/<%= rooms._id %>" style="text-decoration: none; color: white;">See Details</a>
                                    </button>
                        <%    } %>
                    </div>
                     
                </div>
            </div>
            <% }); %>

            
        </div>
    </div>
    
</section>

<script>
    // if room is unavailable disable, button and change text
    document.getElementById("disableBtn").disabled=true;
    document.getElementById("disableBtn").innerHTML="Unavailable";

</script>

<%- include('partials/footer') %>
